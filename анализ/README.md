# Анализ референса игры

## Структура анализа

Данная папка содержит детальный анализ всех систем игры из референса.

---

## Файлы анализа

### 1. [00_overview.md](./00_overview.md)
**Общий обзор проекта**
- Цель и требования
- Технологии (PixiJS, GSAP, Howler.js)
- Структура файлов референса
- Основные классы и компоненты

### 2. [02_game_controller.md](./02_game_controller.md)
**GameController (Iq) - Детальный анализ**
- Структура класса
- Состояния игры (LOADING, INTRO, RUNNING, PAUSED, END_WIN, END_LOSE)
- Игровые сущности (player, enemies, obstacles, collectibles)
- Методы управления игрой
- Система спавна сущностей
- Коллизии и обработка событий

### 3. [03_player.md](./03_player.md)
**Player ($S) - Детальный анализ**
- Структура класса
- Состояние и физика
- Спрайты и анимации
- Методы управления (init, run, jump, idle, hurt, update)
- Система прыжков и гравитации

### 4. [04_background.md](./04_background.md)
**ParallaxBackground (Tq) - Детальный анализ**
- Структура класса
- Загрузка текстур
- Создание тайлового фона
- Пул декораций (деревья, лампы, кусты)
- Параллакс эффект
- Бесшовная прокрутка
- Оптимизации

### 5. [05_enemies_obstacles.md](./05_enemies_obstacles.md)
**Враги и препятствия**
- Enemy (sq) - структура и методы
- Obstacle (oq) - структура и методы
- Система спавна
- Коллизии и обработка столкновений
- Предупреждающие метки
- Оптимизации

### 6. [06_collectibles.md](./06_collectibles.md)
**Собираемые предметы**
- Collectible (lq) - структура и методы
- Типы коллекций (доллары, PayPal карты)
- Система спавна
- Коллизии и обработка сбора
- Анимация летящих коллекций
- Специальные коллекции
- Оптимизации

### 7. [07_ui_system.md](./07_ui_system.md)
**UI система и оверлеи**
- Структура UI
- HP Display
- Score Display
- Tutorial Overlay
- End Overlay (экран победы)
- Fail Overlay (экран поражения)
- Countdown Container
- Praise Popup
- CTA Button
- Game Footer
- Responsive Design
- Анимации

### 8. [08_audio_system.md](./08_audio_system.md)
**Аудио система**
- Howler.js v2.2.4
- Аудио файлы (звуковые эффекты и фоновая музыка)
- Загрузка и инициализация
- Использование аудио (jump, collect, hit, win, lose)
- Управление громкостью и мут
- Оптимизации

### 9. [09_assets.md](./09_assets.md)
**Ассеты и их загрузка**
- Система загрузки (te)
- Web Workers для обработки изображений
- Spritesheets и текстуры
- Кэширование ассетов
- Data URIs

### 10. [10_physics_collisions.md](./10_physics_collisions.md)
**Физика и коллизии**
- Гравитация и движение
- Система прыжков
- Коллизии (AABB)
- Обработка столкновений
- Оптимизации

### 11. [11_animations.md](./11_animations.md)
**Анимации**
- GSAP для UI анимаций
- PixiJS AnimatedSprite для спрайтов
- Типы анимаций
- Анимация летящих коллекций
- Анимация конфетти (ConfettiEmitter)
- Анимация предупреждающих меток
- Оптимизации

### 12. [12_constants.md](./12_constants.md)
**Константы игры**
- Константы скорости (Ye)
- Константы здоровья (Yi)
- Константы счёта/баланса (Gt)
- Константы позиций (oe)
- Константы zIndex (me)
- Константы состояний (ge)
- Данные спавна (Gl)
- Константы экрана (yt, Me)
- Константы UI (ae)

### 13. [13_assets_detailed.md](./13_assets_detailed.md)
**Детальный анализ ассетов**
- Полный список всех 46 ассетов
- Типы и размеры ассетов
- Использование ассетов по системам
- Координаты и позиционирование элементов
- Spritesheet структура и парсинг
- Система загрузки ассетов
- Оптимизации ассетов

### 14. [14_final_summary.md](./14_final_summary.md)
**Итоговый анализ - Полная сводка**
- Статус анализа всех систем (✅ завершён)
- Ключевые находки по всем системам
- Использование ассетов и координаты
- Spritesheet структура
- Система спавна и константы
- Рекомендации для клонирования
- Следующие шаги

### 15. [15_shaders.md](./15_shaders.md)
**Шейдеры (GLSL/WGSL)**
- Типы шейдеров (Passthrough, Round Pixels, Mask Filter, Big Triangle)
- GLSL и WGSL реализации
- Система шаблонов PixiJS
- Uniforms и параметры
- Оптимизации рендеринга

### 16. [16_input_system.md](./16_input_system.md)
**Система обработки ввода**
- Touch и Mouse события
- Универсальный обработчик ввода
- Обработка жестов (swipe)
- Debouncing и предотвращение множественных кликов
- Интеграция с GameController
- Оптимизации

### 17. [17_finish_line.md](./17_finish_line.md)
**FinishLine (pq) - Детальный анализ**
- Структура класса финишной линии
- Анимация разрыва ленты
- Интеграция с GameController
- Визуальные эффекты
- Константы и параметры

### 18. [18_confetti_system.md](./18_confetti_system.md)
**ConfettiEmitter (kq) - Детальный анализ**
- Структура класса конфетти
- Физика частиц (гравитация, сопротивление воздуха)
- Взрывы конфетти (из точки, с боков экрана)
- Обновление и анимация частиц
- Оптимизации (object pooling, ограничение количества)

---

## Основные классы

### Игровые классы
- `Zq` (App) - главный класс приложения
- `Iq` (GameController) - контроллер игрового процесса
- `$S` (Player) - игрок
- `Tq` (ParallaxBackground) - параллакс фон
- `sq` (Enemy) - враги
- `oq` (Obstacle) - препятствия
- `lq` (Collectible) - коллекции
- `pq` (FinishLine) - финишная линия
- `kq` (ConfettiEmitter) - эмиттер конфетти

### Вспомогательные классы
- `te` - система загрузки ассетов
- `ks` - ImageBitmap Worker
- `lo` - система текстур

---

## Технологии

### Основные библиотеки
- **PixiJS** - 2D WebGL рендеринг
- **GSAP** v3.12.5 - анимации (CDN)
- **Howler.js** v2.2.4 - аудио система (встроена)

### Технические детали
- **Рендеринг**: WebGL через PixiJS
- **Аудио**: HTML5 Audio API + Howler.js
- **Анимации**: GSAP + PixiJS Ticker
- **Защита контента**: Встроенный watermarking и tracking

---

## Структура игры

### Состояния игры
1. **LOADING** - загрузка ассетов
2. **INTRO** - вводный экран
3. **RUNNING** - игровой процесс
4. **PAUSED** - пауза
5. **END_WIN** - победа
6. **END_LOSE** - поражение

### Игровой цикл
1. Инициализация (загрузка ассетов, создание UI)
2. Показ туториала
3. Запуск игры
4. Обновление игрового цикла (update)
5. Проверка коллизий
6. Спавн сущностей
7. Обработка событий
8. Завершение игры (победа/поражение)

---

## Примечания

- Код минифицирован, поэтому имена классов и переменных сокращены
- Все ассеты хранятся как data URI в HTML файле
- Используется система пулов для оптимизации производительности
- Responsive design через JavaScript
- CTA интеграция через Playbox CTA Helper

---

## Следующие шаги

После изучения анализа можно приступить к:
1. Созданию структуры проекта
2. Реализации основных классов
3. Интеграции систем
4. Оптимизации и тестированию
