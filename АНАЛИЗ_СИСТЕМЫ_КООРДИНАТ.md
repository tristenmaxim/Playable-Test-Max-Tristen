# Анализ системы координат из референса

## Референсные значения (Me=1280px)

### Размеры экрана
- `Me = 1280px` - высота экрана (фиксированное значение)
- `yt = 720px` - ширина экрана в портретной ориентации (единица расстояния)
- `roadY = 1000px` - позиция дороги (Me - oe.GROUND_Y = 1280 - 280)

### Позиционирование игрока
- `playerX = window.innerWidth * 0.18` (18% от ширины)
- `playerY = roadY = 1000px` (от верха экрана)
- `sprite.anchor = (0.5, 1)` - центр по X, низ по Y
- `sprite.scale = 0.54` (фиксированное значение)

### Позиционирование коллектблов
- `baseY = roadY - 60 = 1000 - 60 = 940px`
- `y = baseY - yOffset`
- `sprite.anchor = (0.5, 0.5)` - центр в точке (x, y)

### Примеры позиций коллектблов (для Me=1280px):
- `yOffset=0`: y = 940px (центр коллектбла на 940px от верха)
- `yOffset=50`: y = 940 - 50 = 890px
- `yOffset=100`: y = 940 - 100 = 840px
- `yOffset=150`: y = 940 - 150 = 790px
- `yOffset=200`: y = 940 - 200 = 740px
- `yOffset=250`: y = 940 - 250 = 690px
- `yOffset=280`: y = 940 - 280 = 660px

### Высота прыжка
- `JUMP_HEIGHT = 300px` (из референса: oe.JUMP_HEIGHT = 300)
- Игрок стоит на `roadY = 1000px`
- Максимальная высота прыжка: `roadY - JUMP_HEIGHT = 1000 - 300 = 700px`

### Анализ доступности коллектблов

Если коллектбл имеет диаметр ~52px (радиус ~26px):
- Центр коллектбла: `y`
- Нижняя точка коллектбла: `y - 26px`
- Верхняя точка коллектбла: `y + 26px`

Для коллектбла с `yOffset=280`:
- Центр: y = 660px
- Низ: 660 - 26 = 634px
- Верх: 660 + 26 = 686px
- Игрок может достать до 700px → коллектбл доступен ✅

Для коллектбла с `yOffset=0`:
- Центр: y = 940px
- Низ: 940 - 26 = 914px
- Верх: 940 + 26 = 966px
- Игрок может достать до 700px → коллектбл НЕ доступен ❌

**ВЫВОД:** Коллектблы с `yOffset=0` находятся НИЖЕ максимальной высоты прыжка, значит они должны быть доступны БЕЗ прыжка (на земле или чуть выше).

---

## Масштабирование для разных размеров экрана

Для адаптации к разным размерам экрана нужно масштабировать пропорционально:

```javascript
const referenceHeight = 1280 // Me из референса
const heightScale = window.innerHeight / referenceHeight

// Масштабируем все значения:
roadY = 1000 * heightScale
baseY = (1000 - 60) * heightScale = 940 * heightScale
yOffset_scaled = yOffset * heightScale
y = baseY - yOffset_scaled
JUMP_HEIGHT_scaled = 300 * heightScale
```

---

## Текущая реализация

### Правильно:
- ✅ Формула: `y = baseY - yOffset` где `baseY = roadY - 60`
- ✅ Масштабирование пропорционально высоте экрана
- ✅ JUMP_HEIGHT = 300px (из референса)

### Возможные проблемы:
1. Размер коллектблов - может быть неправильный масштаб
2. Система координат - возможно неправильное понимание anchor
3. Высота прыжка - возможно JUMP_POWER рассчитан неправильно

---

## Рекомендации

1. Использовать ТОЧНУЮ формулу из референса: `y = baseY - yOffset`
2. Проверить размер коллектблов - возможно нужно использовать COLLECTIBLE_RADIUS для визуального размера
3. Проверить расчет JUMP_POWER - должен соответствовать JUMP_HEIGHT = 300px
4. Проверить систему координат - убедиться что anchor коллектблов правильный
